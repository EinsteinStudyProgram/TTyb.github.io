---
layout: post
categories: [crawler]
title: 模拟浏览器登陆
date: 2117-05-29
author: TTyb
desc: "8.模拟浏览器登陆"
showdate: 2017-05-29
---

上一章学习了用 `python` 模拟登陆百度，其中 `get` 和 `post` 的步骤很多，在任何一个环节出错都会导致最后登陆失败，所以这个对于新手来说有点勉强。这一章介绍一个简单的登陆方式，用以获取登陆后的 `cookie` 。

在 `python` 中有一个很强大的库 `selenium` ，这个库能调用浏览器，利用浏览器来登录百度，再提取出 `cookie` ，等下次登陆的时候利用这个 `cookie` 就能达到登陆的效果。而且，用 `selenium` 模拟浏览器根本不需要管什么 `get` 啊 `post` 啊，如果条件允许下，作者还是喜欢用 `selenium` 。在使用 `selenium` 前需要做一些准备工作：

>1. 下载解压安装 <a href="/code/crawler8/selenium-2.45.0.tar.gz" target="_blank">selenium</a>
>2. 下载浏览器， `Chrome` 的版本为 `47.0.2526.106 m` ，`firefox` 的版本为 `32.0.1`
>3. 下载浏览器支持插件到 `python` ，作者的 `Python34` 是安装在 `C` 盘，所以将插件放在 `C:\Python34\` 下面，`Chrome` 的为 `chromedriver.exe` ， `firefox` 的为 `firefoxdriver.exe`

解压完 `selenium-2.45.0.tar.gz` 后，找到 `setup.py` ，运行 `python setup.py install` 等待安装完成即可。这里为什么不用高版本的 `selenium` ？因为高版本的 `selenium` 不支持低版本的浏览器，而且高版本的浏览器插件貌似还没更新，用的时候会出现意想不到的 `bug` ，所以这里使用了低版本的 `selenium` 。安装浏览器后切记关闭浏览器的更新，`Chrome` 关闭更新的方法有：

>1. `C:\Program Files (x86)\Google\` 下直接删除 `update` 文件夹
>2. 右键计算机 -> 管理 -> 服务 -> 禁止 `Google` 更新服务

`firefox` 同理，直接删掉升级的 `exe` ，再禁止掉更新服务。顺便可以在浏览器中找到设置，把设置里面的更新也停止掉。

最后将浏览器插件放到 `Python34` 的目录下，尝试如下代码

```
from selenium import webdriver

# browser = webdriver.Chrome()
browser = webdriver.Firefox()
browser.get("http://www.baidu.com")
```

如果能成功打开浏览器，那么就证明安装成功了！



<img  src="/img/crawler7/result1.jpg"/>

# 练习

```
模拟登陆百度网盘
```

# 源码

<a href="/code/crawler7/crawler7.py" target="_blank">crawler7.py</a>

<a href="/code/crawler7/answer.py" target="_blank">练习答案</a>