---
layout: post
categories: [python]
title: python批量启动多线程
date: 2017-04-19
author: TTyb
desc: "python批量启动多线程"
---

还未了解多线程的请查看博文 [python3多线程趣味详解](http://www.cnblogs.com/TTyb/p/5846745.html)

[python3多线程趣味详解](http://www.cnblogs.com/TTyb/p/5846745.html) 只是介绍了 `python` 多线程的使用，对于批量启动线程来说有些不适用，于是出现如下方法：

> 建立一个线程池，并将某个线程放入进去

```
threadpool = []
th = threading.Thread(target=func_name, args=func_args)
threadpool.append(th)
```

> 批量加入线程

```
for i in range(10):
    th = threading.Thread(target=func_name, args=func_args)
    threadpool.append(th)
```

> 批量开始线程

```
for th in threadpool:
        th.start()
for th in threadpool:
    threading.Thread.join(th)
```

实例如下：

```
#!/usr/bin/python3.4
# -*- coding: utf-8 -*-

import time
import threading


def matter1(music, test):
    print test, music
    # 假设每一首歌曲的时间是2秒
    time.sleep(2)


if __name__ == '__main__':
    # 设定我要听的歌为
    musics = ["music1", "music2", "music3"]
    test = "122678"
    # 开始时间
    start = time.time()

    threadpool = []

    for music in musics:
        th = threading.Thread(target=matter1, args=(music, test))
        threadpool.append(th)
    for th in threadpool:
        th.start()
    for th in threadpool:
        threading.Thread.join(th)

    # 结束时间
    end = time.time()
    print("完成的时间为：" + str(end - start))
```

完成同时听三首歌线程，花费时间 `2s`:

![](http://images2015.cnblogs.com/blog/996148/201704/996148-20170419102557243-1546143581.png)
